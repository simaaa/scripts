-- SHOW PARAMETER TARGET;
SELECT NULL AS type, NULL AS name, NULL AS "SIZE (MB)", NULL AS "SIZE (GB)" FROM DUAL
UNION ALL SELECT 'TOTAL', 'TOTAL RAM (SGA+PGA)', ROUND((sga+pga)/1024/1024), ROUND((sga+pga)/1024/1024/1024,2) FROM (SELECT SUM(value) sga FROM v$sga), (SELECT SUM(pga_used_mem) pga FROM v$process)
UNION ALL SELECT NULL, NULL, NULL, NULL FROM DUAL
UNION ALL SELECT 'TOTAL', 'SGA't, ROUND(SUM(value)/1024/1024), ROUND(SUM(value)/1024/1024/1024,2) FROM v$sga
UNION ALL SELECT 'TOTAL', 'PGA', ROUND(SUM(pga_used_mem)/1024/1024), ROUND(SUM(pga_used_mem)/1024/1024/1024,2) FROM v$process
UNION ALL SELECT 'TOTAL', name, ROUND(value/1024/1024), ROUND(value/1024/1024/1024,2) FROM v$pgastat WHERE NAME = 'total PGA allocated'
UNION ALL SELECT NULL, NULL, NULL, NULL FROM DUAL
UNION ALL SELECT 'TARGET', component, ROUND(current_size/1024/1024), ROUND(current_size/1024/1024/1024,2) FROM v$memory_dynamic_components
  WHERE COMPONENT LIKE '%Target%'
UNION ALL SELECT NULL, NULL, NULL, NULL FROM DUAL
UNION ALL SELECT 'COMPONENTS', component, ROUND(current_size/1024/1024), ROUND(current_size/1024/1024/1024,2) FROM v$memory_dynamic_components
  WHERE COMPONENT NOT LIKE '%Target%'
UNION ALL SELECT 'COMPONENTS', 'TOTAL', ROUND(SUM(current_size)/1024/1024), ROUND(SUM(current_size)/1024/1024/1024,2) FROM v$memory_dynamic_components
  WHERE COMPONENT NOT LIKE '%Target%'
;
